# MCP 게이트웨이 아키텍처 개요

MCP Gateway 시스템의 전체 아키텍처를 개요합니다. 게이트웨이 자체, 관리 백엔드, 지원 API, 스토리지 메커니즘 및 외부 서비스와의 통합 방법을 포함합니다.

---

## 아키텍처 다이어그램

![MCP Gateway Architecture](https://www.mermaidchart.com/raw/32023f97-aaa9-4563-a4fe-2f0f4da28916?theme=light&version=v0.1&format=svg)

---

## 모듈 설명

### MCP 게이트웨이（mcp-gateway）
- **진입점**：`/*` 모든 HTTP 요청을 통합적으로 수신하고, 애플리케이션 계층에서 설정에 따라 동적으로 라우팅
- **라우팅 계층**：접두사와 접미사 `/sse`、`/message`、`/mcp`에 따라 라우팅
- **프로토콜 파싱**：JSON-RPC 형식을 파싱하여 메소드와 매개변수 추출
- **도구 분배**：도구 이름을 파싱하고 호출 매개변수 구성
- **외부 서비스 호출**：외부 서비스에 대한 호출을 시작하고 결과 파싱
- **설정 스토리지（읽기）**：설정 정보 로드

### 관리 백엔드（web）
- **프록시 설정 모듈**：MCP 게이트웨이 프록시/도구 설정에 사용
- **채팅 실험실**：MCP 테스트를 위한 간단한 채팅, 주로 개발자와 자체 개발 시스템에 통합이 필요한 사용자를 위한 참조
- **사용자 관리 모듈**：사용자 권한 및 정보 유지 관리

### 관리 백엔드 서비스（apiserver）
- **주 서비스 모듈**：설정 관리, 사용자 인터페이스, 채팅 기록 조회 등의 API 제공
- **설정 스토리지（쓰기）**：수정사항을 데이터베이스에 기록
- **알림기（송신측）**：설정 변경 시 MCP 게이트웨이에 핫 업데이트 알림

### 설정 스토리지
- 모든 MCP 서비스, 도구, 라우트 등의 설정 저장
- 다양한 구현 지원：디스크（yaml）、SQLite、PostgreSQL、MySQL 등

### Web 데이터 스토리지
- 사용자 데이터, 세션 기록 등 저장
- 다양한 구현 지원：SQLite、PostgreSQL、MySQL 등

### 외부 서비스
- 도구 호출에 필요한 백엔드 서비스 시스템 